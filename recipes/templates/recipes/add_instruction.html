{% extends "base_generic.html" %}

{% block content %}
    <h1>COOKERY BOOKERY</h1> 
    <br>

    <h2>Submit a Recipe</h2>

    <p><b>Name:</b> {{ recipe.name }}</p>
    <p><b>Servings:</b> {{ recipe.servings }}</p>
    <p><b>Nota bene:</b> {{ recipe.nota_bene }}</p>

    <p><em>Need to change something?</em></p>
    <p><a href="{% url 'update-recipe' recipe.id %}"> Edit Recipe</a></p>

    <h3>Ingredients</h3>
    <ul>
    {% for ingredient in recipe.ingredient_set.all %}
        <li>{{ ingredient }}</li>
    {% endfor %} 
    </ul>

    <form method="post">
        {% csrf_token %}

        <h3>Add Instructions</h3>

        <ul>
        {% for instruction in recipe.instruction_set.all %}
            <p><b>Step {{ instruction.step_number }}</b></p>
            <p>{{ instruction.description }}</p>
        {% endfor %} 
        </ul>

        {% for field in instruction_form %}
            <div class="fieldWrapper">
                <b>{{ field.label_tag }}</b> {{ field }}
                {% if field.help_text %}
                    <p class="help">{{ field.help_text|safe }}</p>
                {% endif %}
            </div>
        {% endfor %}

        <button type="submit">Add Instruction</button>
    </form>

    <br>
    <h4>All done adding instructions?</h4>
    <form action='{% url "recipe-detail" recipe.id %}' method="get"><button type="submit">Finish Recipe!</button></form>

{% endblock %}